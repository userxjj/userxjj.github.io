<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>创建菜单和游戏界面 | xujiaojiao</title><meta name="keywords" content="springboot"><meta name="author" content="徐娇娇"><meta name="copyright" content="徐娇娇"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="创建菜单和游戏界面"><meta name="application-name" content="创建菜单和游戏界面"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="创建菜单和游戏界面"><meta property="og:url" content="http://example.com/2025/02/05/%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%92%8C%E6%B8%B8%E6%88%8F%E7%95%8C%E9%9D%A2/index.html"><meta property="og:site_name" content="xujiaojiao"><meta property="og:description" content="导航栏安装插件  新建NavBar.vue组件，使用vueinit自动提示命令初始化一个 vue 页面。scoped 的意思是在当前组件中的样式是独立的。 12345678910111213&amp;lt;template&amp;gt;    &amp;lt;div&amp;gt;            &amp;lt;&amp;#x2F;div&amp;gt;"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg"><meta property="article:author" content="徐娇娇"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg"><meta name="description" content="导航栏安装插件  新建NavBar.vue组件，使用vueinit自动提示命令初始化一个 vue 页面。scoped 的意思是在当前组件中的样式是独立的。 12345678910111213&amp;lt;template&amp;gt;    &amp;lt;div&amp;gt;            &amp;lt;&amp;#x2F;div&amp;gt;"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/02/05/%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%92%8C%E6%B8%B8%E6%88%8F%E7%95%8C%E9%9D%A2/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🔍 分享与热心帮助","🔨 设计开发一条龙"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 徐娇娇","link":"链接: ","source":"来源: xujiaojiao","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'xujiaojiao',
  title: '创建菜单和游戏界面',
  postAI: '',
  pageFillDescription: '导航栏, Bootstrap 使用, 创建 NavBar, 导入 NavBar, 路由配置, 游戏页面, 地图与障碍物, 基类 GameObject, 地图类 GameMap, 障碍物类 Wall, 蛇的运动, 创建单元类 Cell, 创建蛇类 Snack, 实例化蛇类, 将蛇画出来, 蛇的运动, 怎么动, 什么时候动, 获取用户操作, 控制蛇的移动, 蛇头移动, 蛇尾移动, 美化, 合法性判断, 蛇的美化导航栏安装插件新建组件使用自动提示命令初始化一个页面的意思是在当前组件中的样式是独立的使用快速入门寻找合适的导航栏创建通常把关于具体页面的组件创建在文件夹下把涉及到的公共组件放入中对于导航栏创建将找到的代码粘贴到中对战对局记录排行榜个人中心我的退出导入现在还只是在创建的一个公共组件想要在页面中展示必须在中引入导入组件导入效果如下路由配置如果将输入的网页与对应的页面相一一对应需要在中配置路由其中的就是浏览器的其中的就是需要设置下实现的基本页面代表对战页面代表排行榜页面代表对局记录页面代表我的页面代表页面这样就能实现输入就能展示对应的页面那如何实现点击页面的按钮元素也能实现跳转页面呢例如点击对局记录也能跳转到当前页面将按钮关联到路由名称例如点击排行榜游戏页面地图与障碍物首先实现地图功能生成一个合法地图有边界有随机对称出现的障碍物中心对称初始时两个分别在左下角和右上角左下角和右上角是连通的障碍物的布置有一定限制游戏中的每一个组件都是一个类本次我们需要实现两个类地图类和樯类分别对应绿色部分和棕色部分对于所有类我们还要实现一个基类基类屏幕每秒钟刷新次也可以调整次数每次渲染出的画面称为帧也就是一秒钟有帧画面那如何实现让物体的移动呢需要依次计算出物体在每一帧下的位置每到下一帧就要把上一帧画面全部覆盖重新画最后渲染出的整体画面有产生了运动的效果在实现的过程中关于运动这一点需要抽象出一个基本的工具类实现公共功能凡是需要动的每秒钟都要刷新次即重画次都需要用到这样一个功能所有的都会用到这样一个工具类我们就将其作为基类通常工具类都放在中用于存放常用脚本创建如何实现每秒钟所有的游戏对象都被刷新次一般浏览器的默认设置借助函数传入一个回调函数那么这个回调函数就会在下一帧之内也就是下一帧浏览器渲染之前执行一遍如何让函数每一帧都执行将其写成递归形式这样当我们开始调用会在下一帧执行在下一帧执行时执行完到最后再次触发会在下下帧执行就像下面这样最终的结果就是每一帧都执行一次该函数此外我们需要实现三个函数分别是只执行一次每一帧执行一次除了第一帧之外删除之前执行最终的结果是所有对象的函数在第一帧执行了一次假设函数开始执行的那一帧称为第一帧后面的每一帧都执行函数两帧之间的执行的时间间隔记录是否有被执行过只执行一次每一帧执行一次除了第一帧之外删除之前执行上一次执行的时刻地图类用于实现地图需要用到障碍物类在中定义障碍物类障碍物类若继承基类则必须要有这句障碍物横坐标障碍物纵坐标障碍物颜色每帧渲染一次取出一个単位格的边长动态取因为会动态变化取出的引用在中创建例如表示在这个格子处渲染出一个障碍物来用于保存障碍物创建障碍物如果改为给两侧全部加上障碍物则用数组来保存是否存在障碍物初始置位给四周加上障碍物给左右两侧设置为给上下两侧设置为为什么障碍物的颜色会覆盖地图的颜色呢是因为后创建的对象会将前面的对象覆盖掉在内部设置障碍物对称左上角和右下角不能有障碍物在内部设置个对称的障碍物直接进入下一轮循环保证左上角和右下角不能有障碍物成功设置一个障碍物后直接退出当前如何保证连通性呢也就是如何让找到一条从左下角到右上角的没有障碍物的路通过加入一个函数来判断当前地图状态是否具有连通性最终代码定义内部障碍物数量用于保存障碍物属于对象数组判断连通性参考题目蛇形矩阵创建障碍物用数组来保存是否存在障碍物初始置位给四周加上障碍物给左右两侧设置为给上下两侧设置为在内部设置个对称的障碍物直接进入下一轮循环保证左上角和右下角不能有障碍物成功设置一个障碍物后直接退出当前需要将状态的副本传入深度拷贝一个对象先转换成再将解析出来就一定是一个新的东西如果地图不连通传入以及起点和终点的横纵坐标创建障碍物对象并添加到数组如果连通正方形的大小自适应变化渲染偶数颜色奇数颜色蛇的运动先来解决之前存在的一个问题在的地图环境下两条蛇的初始坐标为和起点横纵坐标相加为偶数随着运动奇数偶数起点横纵坐标相加为偶数随着运动奇数偶数由于同一时刻奇偶性相同因此有可能走到同一个格子中修改对应的起点和所以两条蛇一定不会走到同一个格子里相应的对称的布局应该为中心对称创建单元类在构造器中传入行和列信息并将其转换为坐标信息表示行表示列创建蛇类存放蛇的身体存放蛇头实例化蛇类在中将两条蛇创建出来也就是实例化两个类的对象将蛇画出来效果如下蛇的运动怎么动如果只有一个单元定义一个速度变量并且在每一帧的刷新函数中计算蛇的坐标如果多个单元例如下面的场景向右移动一格但魔鬼都在细节之中正常移动的过程会产生不连贯的现象那如何更好的移动的呢创建一个虚拟头结点只让虚拟头结点和尾结点移动其余结点保持不变这样在拐角处一直保持连贯性什么时候动由于我们设计的是回合制游戏所以需要当判断出两条蛇都有下一步指令的时候才应该按照指令分别动一步首先在记录当前蛇收到的指令以及蛇的状态其次还要有裁判来判断蛇是否能动不能由蛇自己判断运动员本身不能当裁判我们将裁判的逻辑放在中如果准备好了下一回合就让蛇走下一步中蛇走下一步函数的定义如下获取用户操作在中给新增属性可以获取用户操作在中为绑定一个获取用户输入信息的事件控制蛇的移动对于蛇的移动来说先考虑除了头元素之外的其他元素蛇的前进是新增头元素有时砍掉尾元素的过程后面会讲到而新增头元素剩余其他的下标顺序都要往后移动在中此时的位置就腾出来了然后需要将指向的位置先看下如何移动蛇头元素蛇头移动需要根据与目标元素也就是的的位置和蛇头当前的位置来决定的和坐标接下来的变化此时已经可以达到移动效果此时实现了蛇头的移动但是还没有实现蛇尾移动蛇尾移动首先在增加判断蛇的长度是否增加的函数我们规定前回合蛇的长度每回合后面的回合每回合也就是第如果需要变长那么蛇尾不动即可如果不变长那么蛇尾就要跟着蛇头移动并且移动完要将蛇尾砍掉从对象数组中移走于是在中更新如下美化让蛇形体更连贯让蛇更瘦更新合法性判断我们还要在中加入合法性判断用于检测目标位置是否合法在中的要针对这种判断做出反应并在中加入绘图逻辑当蛇的时候颜色变白结果展示往回走也是不行因为相当于自己和之前的装机注意两条蛇的合法性判断是独立的当两条蛇的蛇头位置都不合法时平局蛇的美化为蛇头添加眼睛初始化类时候初始化一个变量表示蛇的眼睛方向然后在每次执行函数时更新变量计算蛇眼睛在不同方向上的偏移量最后在函数中画蛇眼睛然后保存代码查看历史记录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-02-05 13:32:06',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://www.helloimg.com/i/2025/01/06/677bd0ca46aa1.gif"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://userxjj.github.io/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.xujiaojiaojiao.cn/" title="xjjapp"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="xjjapp"/><span class="back-menu-item-text">xjjapp</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">xujiaojiao</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 互动</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://www.helloimg.com/i/2024/12/22/67680d24634a2.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://www.helloimg.com/i/2024/12/22/67680d24634a2.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://www.helloimg.com/i/2024/12/22/67680d250f28e.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://www.helloimg.com/i/2024/12/22/67680d250f28e.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/SSH%E3%80%81SCP/" style="font-size: 1.05rem;">SSH、SCP<sup>1</sup></a><a href="/tags/Web/" style="font-size: 1.05rem;">Web<sup>2</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>1</sup></a><a href="/tags/javaScript/" style="font-size: 1.05rem;">javaScript<sup>8</sup></a><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>2</sup></a><a href="/tags/react/" style="font-size: 1.05rem;">react<sup>4</sup></a><a href="/tags/shell/" style="font-size: 1.05rem;">shell<sup>1</sup></a><a href="/tags/springboot/" style="font-size: 1.05rem;">springboot<sup>4</sup></a><a href="/tags/thrift/" style="font-size: 1.05rem;">thrift<sup>1</sup></a><a href="/tags/thrift-1/" style="font-size: 1.05rem;">thrift-1<sup>1</sup></a><a href="/tags/vim%E3%80%81tmux/" style="font-size: 1.05rem;">vim、tmux<sup>1</sup></a><a href="/tags/vue3/" style="font-size: 1.05rem;">vue3<sup>3</sup></a><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" style="font-size: 1.05rem;">嵌入式<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">操作系统<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>4</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">设计模式<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">17</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">17</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">转载</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/springboot/" itemprop="url">springboot</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/springboot/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>springboot</span></a></span></div></div><h1 class="post-title" itemprop="name headline">创建菜单和游戏界面</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-02-05T05:27:26.000Z" title="发表于 2025-02-05 13:27:26">2025-02-05</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-02-05T05:32:06.841Z" title="更新于 2025-02-05 13:32:06">2025-02-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">4.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="创建菜单和游戏界面"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为武汉"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>武汉</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.xujiaojiao.xyz"><header><a class="post-meta-categories" href="/categories/springboot/" itemprop="url">springboot</a><a href="/tags/springboot/" tabindex="-1" itemprop="url">springboot</a><h1 id="CrawlerTitle" itemprop="name headline">创建菜单和游戏界面</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">xujiaojiao</span><time itemprop="dateCreated datePublished" datetime="2025-02-05T05:27:26.000Z" title="发表于 2025-02-05 13:27:26">2025-02-05</time><time itemprop="dateCreated datePublished" datetime="2025-02-05T05:32:06.841Z" title="更新于 2025-02-05 13:32:06">2025-02-05</time></header><h2 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a><a href="about:blank#%E5%AF%BC%E8%88%AA%E6%A0%8F" title="导航栏"></a>导航栏</h2><p>安装插件</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed8d891e2.png" alt="springboot2-1.png"></p>
<p>新建<code>NavBar.vue</code>组件，使用<code>vueinit</code>自动提示命令初始化一个 vue 页面。scoped 的意思是在当前组件中的样式是独立的。</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table>

<h3 id="Bootstrap-使用"><a href="#Bootstrap-使用" class="headerlink" title="Bootstrap 使用"></a><a href="about:blank#Bootstrap%E4%BD%BF%E7%94%A8" title="Bootstrap使用"></a>Bootstrap 使用</h3><p><a target="_blank" rel="noopener" href="https://v5.bootcss.com/">https://v5.bootcss.com/</a></p>
<p>快速入门<a target="_blank" rel="noopener" href="https://v5.bootcss.com/docs/getting-started/introduction/">https://v5.bootcss.com/docs/getting-started/introduction/</a></p>
<p>寻找合适的导航栏</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed8dd0a61.png" alt="springboot2-2.png"></p>
<h3 id="创建-NavBar"><a href="#创建-NavBar" class="headerlink" title="创建 NavBar"></a><a href="about:blank#%E5%88%9B%E5%BB%BANavBar" title="创建NavBar"></a>创建 NavBar</h3><p>通常把关于具体页面的组件，创建在<code>src\views</code>文件夹下，把涉及到的公共组件，放入<code>src\components</code>中</p>
<p>对于导航栏，创建<code>src\components\NavBar.vue</code></p>
<p>将 Bootstrap 找到的代码粘贴到<code>&lt;template&gt;</code>中，</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-expand-lg navbar-dark bg-dark"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span> <span class="attr">:to</span>=<span class="string">"{ name: 'home' }"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>King of Bot&lt;/router-link</span><br><span class="line">      &gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collapse navbar-collapse"</span> <span class="attr">id</span>=<span class="string">"navbarText"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"navbar-nav me-auto mb-2 mb-lg-0"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">"route_name == 'pk_index' ? 'nav-link active' : 'nav-link'"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:to</span>=<span class="string">"{ name: 'pk_index' }"</span></span></span><br><span class="line"><span class="tag">              &gt;</span>对战&lt;/router-link</span><br><span class="line">            &gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">"</span></span></span><br><span class="line"><span class="string"><span class="tag">                route_name == 'record_index' ? 'nav-link active' : 'nav-link'</span></span></span><br><span class="line"><span class="string"><span class="tag">              "</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:to</span>=<span class="string">"{ name: 'record_index' }"</span></span></span><br><span class="line"><span class="tag">              &gt;</span>对局记录&lt;/router-link</span><br><span class="line">            &gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:class</span>=<span class="string">"</span></span></span><br><span class="line"><span class="string"><span class="tag">                route_name == 'ranklist_index' ? 'nav-link active' : 'nav-link'</span></span></span><br><span class="line"><span class="string"><span class="tag">              "</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:to</span>=<span class="string">"{ name: 'ranklist_index' }"</span></span></span><br><span class="line"><span class="tag">              &gt;</span>排行榜&lt;/router-link</span><br><span class="line">            &gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"navbar-nav"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"nav-item dropdown"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">"nav-link dropdown-toggle"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">href</span>=<span class="string">"#"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">id</span>=<span class="string">"navbarDropdown"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">role</span>=<span class="string">"button"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">data-bs-toggle</span>=<span class="string">"dropdown"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">aria-expanded</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">              个人中心</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"dropdown-menu"</span> <span class="attr">aria-labelledby</span>=<span class="string">"navbarDropdown"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">router-link</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">"dropdown-item"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:to</span>=<span class="string">"{ name: 'user_bot_index' }"</span></span></span><br><span class="line"><span class="tag">                  &gt;</span>我的Bot&lt;/router-link</span><br><span class="line">                &gt;</span><br><span class="line">              <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">"dropdown-divider"</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"dropdown-item"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> { useRoute } <span class="keyword">from</span> <span class="string">"vue-router"</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> { computed } <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> route = <span class="title function_">useRoute</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> route_name = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> route.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="language-javascript">      route_name,</span></span><br><span class="line"><span class="language-javascript">    };</span></span><br><span class="line"><span class="language-javascript">  },</span></span><br><span class="line"><span class="language-javascript">};</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table>

<h3 id="导入-NavBar"><a href="#导入-NavBar" class="headerlink" title="导入 NavBar"></a><a href="about:blank#%E5%AF%BC%E5%85%A5NavBar" title="导入NavBar"></a>导入 NavBar</h3><p>现在还只是在<code>src\components</code>创建的一个公共组件，想要在页面中展示，必须在<code>src\App.vue</code>中引入</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">NavBar</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 导入组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">NavBar</span> <span class="keyword">from</span> <span class="string">'./components/NavBar.vue'</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 导入bootstrap</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="string">"bootstrap/dist/css/bootstrap.min.css"</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="string">"bootstrap/dist/js/bootstrap"</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span>{</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>:{</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">NavBar</span></span></span><br><span class="line"><span class="language-javascript">  }</span></span><br><span class="line"><span class="language-javascript">}</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span>{</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">"./assets/images/background.jpg"</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="language-css">}</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table>

<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed8f2f4a4.png" alt="springboot2-3.png"></p>
<p>效果如下：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed8dbe783.png" alt="springboot2-4.png"></p>
<h3 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a><a href="about:blank#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE" title="路由配置"></a>路由配置</h3><p>如果将输入的网页，与对应的页面相一一对应，需要在<code>src\router\index.js</code>中配置路由</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { createRouter, createWebHistory } <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PkIndexView</span> <span class="keyword">from</span> <span class="string">"../views/pk/PkIndexView"</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">RecordIndexView</span> <span class="keyword">from</span> <span class="string">"../views/record/RecordIndexView"</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">RanklistIndexView</span> <span class="keyword">from</span> <span class="string">"../views/ranklist/RanklistIndexView"</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UserBotIndexView</span> <span class="keyword">from</span> <span class="string">"../views/user/bot/UserBotIndexView"</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">"../views/error/NotFound"</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/"</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">"home"</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">"/pk/"</span></span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/pk/"</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">"pk_index"</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">PkIndexView</span>,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/record/"</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">"record_index"</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">RecordIndexView</span>,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/ranklist/"</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">"ranklist_index"</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">RanklistIndexView</span>,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/user/bot/"</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">"user_bot_index"</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">UserBotIndexView</span>,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/404/"</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">"404"</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">NotFound</span>,</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>:<span class="string">"/:catchAll(.*)"</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">"/404/"</span></span><br><span class="line">  }</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>({</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  routes</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></tbody></table>

<p>其中的<code>path</code>就是浏览器的<code>url</code>，其中的<code>component</code>就是需要设置<code>src\views</code>下实现的基本页面。</p>
<p><code>src\views\pk\PkIndexView.vue</code>代表对战页面</p>
<p><code>src\views\ranklist\RanklistIndexView.vue</code>代表排行榜页面</p>
<p><code>src\views\record\RecordIndexView.vue</code>代表对局记录页面</p>
<p><code>src\views\user\bot\UserBotIndexView.vue</code>代表我的 Bot 页面</p>
<p><code>src\views\error\NotFound.vue</code>代表 404 页面</p>
<p>这样就能实现输入 url 就能展示对应的页面</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed8e0e6b2.png" alt="springboot2-5.png"></p>
<p>那如何实现点击页面的按钮元素，也能实现跳转页面呢，例如点击<code>对局记录</code>，也能跳转到当前页面</p>
<p>将按钮关联到路由名称</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed8dda887.png" alt="springboot2-6.png"></p>
<p>例如，点击<code>排行榜</code></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9190184.png" alt="springboot2-7.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed91e5ddb.png" alt="springboot2-8.png"></p>
<h2 id="游戏页面"><a href="#游戏页面" class="headerlink" title="游戏页面"></a><a href="about:blank#%E6%B8%B8%E6%88%8F%E9%A1%B5%E9%9D%A2" title="游戏页面"></a>游戏页面</h2><h3 id="地图与障碍物"><a href="#地图与障碍物" class="headerlink" title="地图与障碍物"></a><a href="about:blank#%E5%9C%B0%E5%9B%BE%E4%B8%8E%E9%9A%9C%E7%A2%8D%E7%89%A9" title="地图与障碍物"></a>地图与障碍物</h3><p>首先实现地图功能</p>
<p>生成一个合法地图：</p>
<ul>
<li>有边界</li>
<li>有随机、对称出现的障碍物</li>
<li>中心对称</li>
<li>初始时 两个 Game Object 分别在左下角和右上角</li>
<li>左下角和右上角是连通的（障碍物的布置有一定限制）</li>
</ul>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed92722bb.png" alt="springboot2-9.png"></p>
<p>游戏中的每一个组件都是一个类，本次我们需要实现两个类，地图类和樯类，分别对应绿色部分和棕色部分。</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed918465a.png" alt="springboot2-10.png"></p>
<p>对于所有类，我们还要实现一个基类。</p>
<h3 id="基类-GameObject"><a href="#基类-GameObject" class="headerlink" title="基类 GameObject"></a><a href="about:blank#%E5%9F%BA%E7%B1%BBGameObject" title="基类GameObject"></a>基类 GameObject</h3><p>屏幕每秒钟刷新 60 次（也可以调整次数） 每次渲染出的画面称为帧 也就是一秒钟有 60 帧画面</p>
<p>那如何实现让物体的移动呢 需要依次计算出物体在每一帧下的位置 （每到下一帧 就要把上一帧画面全部覆盖重新画）最后渲染出的整体画面有产生了运动的效果。</p>
<p>在实现的过程中，关于运动这一点，需要抽象出一个基本的工具类，实现公共功能（凡是需要动的 Object，每秒钟都要刷新 60 次即重画 60 次，都需要用到这样一个功能）</p>
<p>所有的 Object 都会用到这样一个工具类，我们就将其作为基类。</p>
<p>通常，工具类都放在<code>src\assets\scripts</code>中，用于存放常用脚本</p>
<p>创建<code>GameObject.js</code></p>
<p>如何实现每秒钟所有的游戏对象都被刷新 60 次（一般浏览器的默认设置），借助<code>requestAnimationFrame</code>函数，传入一个回调函数<code>step</code>，那么这个回调函数就会在下一帧之内，也就是下一帧浏览器渲染之前执行一遍。</p>
<p>如何让<code>step</code>函数每一帧都执行，将其写成递归形式。</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">step</span> = (<span class="params"></span>)=&gt;{</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(step)</span><br><span class="line">}</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(step)</span><br></pre></td></tr></tbody></table>

<p>这样，当我们开始调用<code>requestAnimationFrame(step)</code>，会在下一帧执行<code>step</code>，在下一帧执行<code>step</code>时，执行完到最后再次触发<code>requestAnimationFrame(step)</code>，会在下下帧执行<code>step</code></p>
<p>就像下面这样，最终的结果就是每一帧都执行一次该<code>step</code>函数</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed91df420.png" alt="springboot2-11.png"></p>
<p>此外，我们需要实现三个函数，分别是<code>start</code>，<code>update</code>，<code>destroy</code></p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">start</span>(<span class="params"></span>){ <span class="comment">//只执行一次</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"><span class="title function_">upadate</span>(<span class="params"></span>){<span class="comment">//每一帧执行一次 除了第一帧之外</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="title function_">on_destroy</span>(<span class="params"></span>){<span class="comment">//删除之前执行</span></span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="title function_">destroy</span>(<span class="params"></span>){</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">on_destroy</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> <span class="variable constant_">GAME_OBJECTS</span>){</span><br><span class="line">        <span class="keyword">const</span> obj = <span class="variable constant_">GAME_OBJECTS</span>[i];</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="variable language_">this</span>){</span><br><span class="line">            <span class="variable constant_">GAME_OBJECTS</span>.<span class="title function_">splice</span>(i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

<p>最终的结果是，所有<code>GameObject</code>对象的<code>start</code>函数在第一帧执行了一次（假设<code>step</code>函数开始执行的那一帧称为第一帧），后面的每一帧都执行<code>upadate</code>函数</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">GAME_OBJECTS</span> = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GameObject</span> {</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>){</span><br><span class="line">        <span class="variable constant_">GAME_OBJECTS</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timedelta</span> = <span class="number">0</span>;<span class="comment">//两帧之间的执行的时间间隔</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">has_called_start</span> = <span class="literal">false</span>;<span class="comment">//记录start()是否有被执行过</span></span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>){ <span class="comment">//只执行一次</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">upadate</span>(<span class="params"></span>){<span class="comment">//每一帧执行一次 除了第一帧之外</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">on_destroy</span>(<span class="params"></span>){<span class="comment">//删除之前执行</span></span><br><span class="line"></span><br><span class="line">    } </span><br><span class="line">    <span class="title function_">destroy</span>(<span class="params"></span>){</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">on_destroy</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> <span class="variable constant_">GAME_OBJECTS</span>){</span><br><span class="line">            <span class="keyword">const</span> obj = <span class="variable constant_">GAME_OBJECTS</span>[i];</span><br><span class="line">            <span class="keyword">if</span> (obj == <span class="variable language_">this</span>){</span><br><span class="line">                <span class="variable constant_">GAME_OBJECTS</span>.<span class="title function_">splice</span>(i);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">let</span> last_timestemp;<span class="comment">//上一次执行的时刻</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">step</span> = timestemp =&gt;{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> obj <span class="keyword">of</span> <span class="title class_">GameObjects</span>){</span><br><span class="line">        <span class="keyword">if</span>(!obj.<span class="property">has_called_start</span>){</span><br><span class="line">            obj.<span class="property">has_called_start</span> = <span class="literal">true</span>;</span><br><span class="line">            obj.<span class="title function_">start</span>();</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            obj.<span class="property">timedelta</span> = timestemp - last_timestemp;</span><br><span class="line">            obj.<span class="title function_">upadate</span>();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    last_timestemp = timestemp;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(step)</span><br><span class="line">}</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(step)</span><br></pre></td></tr></tbody></table>

<h3 id="地图类-GameMap"><a href="#地图类-GameMap" class="headerlink" title="地图类 GameMap"></a><a href="about:blank#%E5%9C%B0%E5%9B%BE%E7%B1%BBGameMap" title="地图类GameMap"></a>地图类 GameMap</h3><p>用于实现地图</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed95ab4c0.png" alt="springboot2-12.png"></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p>
<p>需要用到 Canvas API</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API">https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API</a></p>
<h3 id="障碍物类-Wall"><a href="#障碍物类-Wall" class="headerlink" title="障碍物类 Wall"></a><a href="about:blank#%E9%9A%9C%E7%A2%8D%E7%89%A9%E7%B1%BBWall" title="障碍物类Wall"></a>障碍物类 Wall</h3><p>在<code>src\assets\scripts\Wall.js</code>中定义障碍物类<code>Wall</code></p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//障碍物类</span></span><br><span class="line"><span class="keyword">import</span> { <span class="title class_">GameObject</span> } <span class="keyword">from</span> <span class="string">"./GameObject"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Wall</span> <span class="keyword">extends</span> <span class="title class_ inherited__">GameObject</span>{</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">r, c, gamemap</span>){</span><br><span class="line">        <span class="variable language_">super</span>();<span class="comment">//若继承基类，则必须要有这句</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">r</span> = r;<span class="comment">//障碍物横坐标</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">c</span> = c;<span class="comment">//障碍物纵坐标</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gamemap</span> = gamemap;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">color</span> = <span class="string">"#b47226"</span>;<span class="comment">//障碍物颜色</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>){</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">render</span>();<span class="comment">//每帧渲染一次</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) {</span><br><span class="line">        <span class="keyword">const</span> L = <span class="variable language_">this</span>.<span class="property">gamemap</span>.<span class="property">L</span>;<span class="comment">//取出一个単位格的边长 动态取 因为L会动态变化</span></span><br><span class="line">        <span class="keyword">const</span> ctx = <span class="variable language_">this</span>.<span class="property">gamemap</span>.<span class="property">ctx</span>;<span class="comment">//取出canvas的引用</span></span><br><span class="line">        ctx.<span class="property">fillStyle</span> = <span class="variable language_">this</span>.<span class="property">color</span>;</span><br><span class="line">        ctx.<span class="property">fillRect</span> (<span class="variable language_">this</span>.<span class="property">c</span> * L, <span class="variable language_">this</span>.<span class="property">r</span> * L, L, L);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

<p>在<code>src\assets\scripts\GameMap.js</code>中创建，例如<code>new Wall(0,0,this)</code>表示在<code>(0,0)</code>这个格子处渲染出一个障碍物来</p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { <span class="title class_">GameObject</span> } <span class="keyword">from</span> <span class="string">"./GameObject"</span>;</span><br><span class="line"><span class="keyword">import</span> {<span class="title class_">Wall</span>} <span class="keyword">from</span> <span class="string">"./Wall"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GameMap</span> <span class="keyword">extends</span> <span class="title class_ inherited__">GameObject</span> {</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">ctx, parent</span>){</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ctx</span> = ctx;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">parent</span> = parent;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">L</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">rows</span> = <span class="number">13</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cols</span> = <span class="number">13</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">walls</span> = [];<span class="comment">//用于保存障碍物</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//创建障碍物</span></span><br><span class="line">    <span class="title function_">create_walls</span>(<span class="params"></span>){</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Wall</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="variable language_">this</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>){</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">create_walls</span>();</span><br><span class="line">    }</span><br><span class="line">    ...</span><br></pre></td></tr></tbody></table>

<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed967f575.png" alt="springboot2-13.png"></p>
<p>如果改为给两侧全部加上障碍物，则<code>create_walls()</code></p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">create_walls</span>(<span class="params"></span>){</span><br><span class="line">       <span class="keyword">const</span> g = [];<span class="comment">//用bool数组来保存是否存在障碍物 初始置位false</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){</span><br><span class="line">           g[r] = [];</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){</span><br><span class="line">               g[r][c] = <span class="literal">false</span>;</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="comment">//给四周加上障碍物</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){<span class="comment">//给左右两侧设置为true</span></span><br><span class="line">           g[r][<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">           g[r][<span class="variable language_">this</span>.<span class="property">cols</span>-<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){<span class="comment">//给上下两侧设置为true</span></span><br><span class="line">           g[<span class="number">0</span>][c] = g[<span class="variable language_">this</span>.<span class="property">rows</span>-<span class="number">1</span>][c] = <span class="literal">true</span>;</span><br><span class="line">       }</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(g);</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){</span><br><span class="line">               <span class="keyword">if</span>(g[r][c]){</span><br><span class="line">                   <span class="variable language_">this</span>.<span class="property">walls</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Wall</span> (r,c,<span class="variable language_">this</span>));</span><br><span class="line">               }</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table>

<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed948e69d.png" alt="springboot2-14.png"></p>
<p>为什么障碍物的颜色会覆盖地图的颜色呢？是因为后创建的对象会将前面的对象覆盖掉。</p>
<p>在内部设置障碍物：</p>
<ul>
<li>对称</li>
<li>左上角和右下角不能有障碍物</li>
</ul>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在内部设置inner_walls_count个对称的障碍物4</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">inner_walls_count</span> / <span class="number">2</span>; i++){</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) {</span><br><span class="line">        <span class="keyword">let</span> r = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="variable language_">this</span>.<span class="property">rows</span>);</span><br><span class="line">        <span class="keyword">let</span> c = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="variable language_">this</span>.<span class="property">cols</span>);</span><br><span class="line">        <span class="keyword">if</span>(g[r][c] || g[c][r]) <span class="keyword">continue</span>;<span class="comment">//直接进入下一轮循环 j++</span></span><br><span class="line">        <span class="keyword">if</span>(r == <span class="variable language_">this</span>.<span class="property">rows</span> - <span class="number">2</span> &amp;&amp; c == <span class="number">1</span> || r == <span class="number">1</span> &amp;&amp; c == <span class="variable language_">this</span>.<span class="property">cols</span>-<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">continue</span>;<span class="comment">//保证左上角和右下角不能有障碍物</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//成功设置一个障碍物后 直接退出当前for i++</span></span><br><span class="line">        g[r][c] = g[c][r] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed94a7be5.png" alt="springboot2-15.png"></p>
<p>如何保证连通性呢，也就是如何让找到一条从左下角到右上角的，没有障碍物的路。</p>
<p>通过加入一个<code>check_connectivity</code>函数，来判断当前地图状态是否具有连通性</p>
<p>最终代码：</p>
<p><code>src\assets\scripts\GameMap.js</code></p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { <span class="title class_">GameObject</span> } <span class="keyword">from</span> <span class="string">"./GameObject"</span>;</span><br><span class="line"><span class="keyword">import</span> {<span class="title class_">Wall</span>} <span class="keyword">from</span> <span class="string">"./Wall"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GameMap</span> <span class="keyword">extends</span> <span class="title class_ inherited__">GameObject</span> {</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">ctx, parent</span>){</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ctx</span> = ctx;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">parent</span> = parent;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">L</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">rows</span> = <span class="number">13</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cols</span> = <span class="number">13</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">inner_walls_count</span> = <span class="number">20</span>;<span class="comment">//定义内部障碍物数量</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">walls</span> = [];<span class="comment">//用于保存障碍物,属于对象数组</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断连通性</span></span><br><span class="line">    <span class="comment">//参考题目:蛇形矩阵</span></span><br><span class="line">    <span class="title function_">check_connectivity</span>(<span class="params">g, sx, sy, tx, ty</span>){</span><br><span class="line">        <span class="keyword">if</span> (sx == tx &amp;&amp; sy == ty) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        g[sx][sy] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> dx = [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>];</span><br><span class="line">        <span class="keyword">let</span> dy = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++){</span><br><span class="line">            <span class="keyword">let</span> x = sx + dx[i];</span><br><span class="line">            <span class="keyword">let</span> y = sy + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(!g[x][y] &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">check_connectivity</span>(g, x, y, tx, ty))</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//创建障碍物</span></span><br><span class="line">    <span class="title function_">create_walls</span>(<span class="params"></span>){</span><br><span class="line">        <span class="keyword">const</span> g = [];<span class="comment">//用bool数组来保存是否存在障碍物 初始置位false</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){</span><br><span class="line">            g[r] = [];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){</span><br><span class="line">                g[r][c] = <span class="literal">false</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//给四周加上障碍物</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){<span class="comment">//给左右两侧设置为true</span></span><br><span class="line">            g[r][<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">            g[r][<span class="variable language_">this</span>.<span class="property">cols</span>-<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){<span class="comment">//给上下两侧设置为true</span></span><br><span class="line">            g[<span class="number">0</span>][c] = g[<span class="variable language_">this</span>.<span class="property">rows</span>-<span class="number">1</span>][c] = <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//在内部设置inner_walls_count个对称的障碍物</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">inner_walls_count</span> / <span class="number">2</span>; i++){</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) {</span><br><span class="line">                <span class="keyword">let</span> r = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="variable language_">this</span>.<span class="property">rows</span>);</span><br><span class="line">                <span class="keyword">let</span> c = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="variable language_">this</span>.<span class="property">cols</span>);</span><br><span class="line">                <span class="keyword">if</span>(g[r][c] || g[c][r]) <span class="keyword">continue</span>;<span class="comment">//直接进入下一轮循环 j++</span></span><br><span class="line">                <span class="keyword">if</span>(r == <span class="variable language_">this</span>.<span class="property">rows</span> - <span class="number">2</span> &amp;&amp; c == <span class="number">1</span> || r == <span class="number">1</span> &amp;&amp; c == <span class="variable language_">this</span>.<span class="property">cols</span>-<span class="number">2</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;<span class="comment">//保证左上角和右下角不能有障碍物</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">//成功设置一个障碍物后 直接退出当前for i++</span></span><br><span class="line">                g[r][c] = g[c][r] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//需要将状态g的副本传入check_connectivity</span></span><br><span class="line">        <span class="comment">//深度拷贝一个对象:先转换成json再将json解析出来 就一定是一个新的东西</span></span><br><span class="line">        <span class="keyword">const</span> copy_g = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(g));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果地图不连通</span></span><br><span class="line">        <span class="comment">//传入g以及起点和终点的横纵坐标</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="title function_">check_connectivity</span>(copy_g,<span class="variable language_">this</span>.<span class="property">rows</span>-<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">cols</span>-<span class="number">2</span>)) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建障碍物对象 并添加到this.walls数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){</span><br><span class="line">                <span class="keyword">if</span>(g[r][c]){</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">walls</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Wall</span> (r,c,<span class="variable language_">this</span>));</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//如果连通  </span></span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>){</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) {</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="title function_">create_walls</span>())</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">update_size</span>(<span class="params"></span>){</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">L</span> = <span class="built_in">parseInt</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">this</span>.<span class="property">parent</span>.<span class="property">clientWidth</span> / <span class="variable language_">this</span>.<span class="property">cols</span>, <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="property">clientHeight</span> / <span class="variable language_">this</span>.<span class="property">rows</span>));</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">canvas</span>.<span class="property">width</span> = <span class="variable language_">this</span>.<span class="property">L</span> * <span class="variable language_">this</span>.<span class="property">cols</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">canvas</span>.<span class="property">height</span> = <span class="variable language_">this</span>.<span class="property">L</span> * <span class="variable language_">this</span>.<span class="property">rows</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>){</span><br><span class="line">        <span class="comment">// 正方形的大小 自适应变化</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">update_size</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">render</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) {<span class="comment">//渲染    </span></span><br><span class="line">        <span class="keyword">const</span> color_even = <span class="string">'#AAD751'</span><span class="comment">//偶数颜色</span></span><br><span class="line">        <span class="keyword">const</span> color_odd = <span class="string">'#A2D149'</span><span class="comment">//奇数颜色</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span> ; r &lt; <span class="variable language_">this</span>.<span class="property">rows</span>; r++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; <span class="variable language_">this</span>.<span class="property">cols</span>; c++){</span><br><span class="line">                <span class="keyword">if</span>(( r + c ) % <span class="number">2</span> == <span class="number">0</span>){</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">fillStyle</span> = color_even;</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="property">fillStyle</span> = color_odd;</span><br><span class="line">                }</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">fillRect</span>(c* <span class="variable language_">this</span>.<span class="property">L</span>, r* <span class="variable language_">this</span>.<span class="property">L</span>, <span class="variable language_">this</span>.<span class="property">L</span>, <span class="variable language_">this</span>.<span class="property">L</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

<h2 id="蛇的运动"><a href="#蛇的运动" class="headerlink" title="蛇的运动"></a><a href="about:blank#%E8%9B%87%E7%9A%84%E8%BF%90%E5%8A%A8" title="蛇的运动"></a>蛇的运动</h2><p>先来解决之前存在的一个问题，在 13*13 的地图环境下：</p>
<p>两条蛇的初始坐标为（11,1）和（1,11）</p>
<p>（11,1）起点，横纵坐标相加为偶数，随着运动，奇数，偶数，…</p>
<p>（1,11）起点，横纵坐标相加为偶数，随着运动，奇数，偶数，…</p>
<p>由于同一时刻，奇偶性相同，因此，有可能走到同一个格子中。</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed94ed9c0.png" alt="springboot2-16.png"></p>
<p>修改，对应的起点（11,1）和（1,12）所以两条蛇一定不会走到同一个格子里。</p>
<p>相应的，对称的布局应该为中心对称</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed95d2188.png" alt="springboot2-17.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed96c57da.png" alt="springboot2-18.png"></p>
<h3 id="创建单元类-Cell"><a href="#创建单元类-Cell" class="headerlink" title="创建单元类 Cell"></a><a href="about:blank#%E5%88%9B%E5%BB%BA%E5%8D%95%E5%85%83%E7%B1%BBCell" title="创建单元类Cell"></a>创建单元类 Cell</h3><p>在构造器中，传入行(r)和列(c)信息，并将其转换为坐标信息</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed97ba11e.png" alt="springboot2-19.png"></p>
<p><code>src\assets\scripts\Cell.js</code></p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Cell</span>{</span><br><span class="line">    <span class="comment">//r表示行 c表示列</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">r,c</span>){</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">r</span> = r;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">c</span> = c;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = c + <span class="number">0.5</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = r + <span class="number">0.5</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

<h3 id="创建蛇类-Snack"><a href="#创建蛇类-Snack" class="headerlink" title="创建蛇类 Snack"></a><a href="about:blank#%E5%88%9B%E5%BB%BA%E8%9B%87%E7%B1%BBSnack" title="创建蛇类Snack"></a>创建蛇类 Snack</h3><p><code>src\assets\scripts\Snack.js</code></p>
<table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { <span class="title class_">GameObject</span> } <span class="keyword">from</span> <span class="string">"./GameObject"</span>;</span><br><span class="line"><span class="keyword">import</span> { <span class="title class_">Cell</span> } <span class="keyword">from</span> <span class="string">"./Cell"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Snake</span> <span class="keyword">extends</span> <span class="title class_ inherited__">GameObject</span>{</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">info, gamemap</span>){</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">id</span> = info.<span class="property">id</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">color</span> = info.<span class="property">color</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gamemap</span> = gamemap;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cells</span> = [<span class="keyword">new</span> <span class="title class_">Cell</span>(info.<span class="property">r</span>, info.<span class="property">c</span>)]; <span class="comment">//存放蛇的身体 cells[0]存放蛇头</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>){</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params"></span>){</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">render</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) {</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table>

<h3 id="实例化蛇类"><a href="#实例化蛇类" class="headerlink" title="实例化蛇类"></a><a href="about:blank#%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%9B%87%E7%B1%BB" title="实例化蛇类"></a>实例化蛇类</h3><p>在<code>src\assets\scripts\GameMap.js</code>中，将两条蛇创建出来（也就是实例化两个 Snack 类的对象）</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed98dced2.png" alt="springboot2-20.png"></p>
<h3 id="将蛇画出来"><a href="#将蛇画出来" class="headerlink" title="将蛇画出来"></a><a href="about:blank#%E5%B0%86%E8%9B%87%E7%94%BB%E5%87%BA%E6%9D%A5" title="将蛇画出来"></a>将蛇画出来</h3><p><code>src\assets\scripts\Snack.js</code></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed99482b9.png" alt="springboot2-21.png"></p>
<p>效果如下：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed98955e1.png" alt="springboot2-22.png"></p>
<h3 id="蛇的运动-1"><a href="#蛇的运动-1" class="headerlink" title="蛇的运动"></a><a href="about:blank#%E8%9B%87%E7%9A%84%E8%BF%90%E5%8A%A8-1" title="蛇的运动"></a>蛇的运动</h3><h4 id="怎么动"><a href="#怎么动" class="headerlink" title="怎么动"></a><a href="about:blank#%E6%80%8E%E4%B9%88%E5%8A%A8" title="怎么动"></a>怎么动</h4><p>1）如果只有一个单元</p>
<p>定义一个速度变量<code>speed</code>，并且在每一帧的刷新函数中，计算蛇的坐标</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9a8fb76.png" alt="springboot2-23.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9a87ae6.png" alt="springboot2-24.png"></p>
<p>2）如果多个单元</p>
<p>例如下面的场景向右移动一格</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9a8b4ca.png" alt="springboot2-25.png"></p>
<p>但魔鬼都在细节之中，正常移动的过程会产生不连贯的现象</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9b2a5a4.png" alt="springboot2-26.png"></p>
<p>那如何更好的移动的呢：</p>
<p>创建一个虚拟头结点，只让虚拟头结点和尾结点移动，其余结点保持不变。这样在拐角处一直保持连贯性。</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9b90764.png" alt="springboot2-27.png"></p>
<h4 id="什么时候动"><a href="#什么时候动" class="headerlink" title="什么时候动"></a><a href="about:blank#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%8A%A8" title="什么时候动"></a>什么时候动</h4><p>由于我们设计的是回合制游戏，所以需要当判断出两条蛇都有下一步指令的时候，才应该按照指令，分别动一步。</p>
<p>首先在<code>src\assets\scripts\Snack.js</code>记录当前蛇收到的指令，以及蛇的状态</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9b87704.png" alt="springboot2-28.png"></p>
<p>其次，还要有裁判来判断蛇是否能动（不能由蛇自己判断 运动员本身不能当裁判）</p>
<p>我们将裁判的逻辑放在<code>src\assets\scripts\GameMap.js</code>中</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9fbf47a.png" alt="springboot2-29.png"></p>
<p>如果准备好了下一回合，就让蛇走下一步：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9e88e8e.png" alt="springboot2-30.png"></p>
<p><code>src\assets\scripts\Snack.js</code>中，蛇走下一步函数的定义如下：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9d87c62.png" alt="springboot2-31.png"></p>
<h4 id="获取用户操作"><a href="#获取用户操作" class="headerlink" title="获取用户操作"></a><a href="about:blank#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C" title="获取用户操作"></a>获取用户操作</h4><p>在<code>src\components\GameMap.vue</code>中给<code>canvas</code>新增属性<code>tabindex=&quot;0&quot;</code>，可以获取用户操作</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9e02931.png" alt="springboot2-32.png"></p>
<p>在<code>src\assets\scripts\GameMap.js</code>中为<code>canvas</code>绑定一个获取用户输入信息的事件</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda19cff9.png" alt="springboot2-33.png"></p>
<h4 id="控制蛇的移动"><a href="#控制蛇的移动" class="headerlink" title="控制蛇的移动"></a><a href="about:blank#%E6%8E%A7%E5%88%B6%E8%9B%87%E7%9A%84%E7%A7%BB%E5%8A%A8" title="控制蛇的移动"></a>控制蛇的移动</h4><p>对于蛇的移动来说</p>
<p>先考虑除了头元素之外的其他元素</p>
<p>蛇的前进是新增头元素（有时砍掉尾元素的过程 后面会讲到）</p>
<p>而新增头元素，剩余其他的下标顺序都要往后移动</p>
<p>在<code>src\assets\scripts\Snack.js</code>中</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ed9f4e2e1.png" alt="springboot2-34.png"></p>
<p>此时<code>cell[0]</code>的位置就腾出来了，然后需要将<code>cell[0]</code>指向<code>next_vell</code>的位置</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda0517a4.png" alt="springboot2-35.png"></p>
<p>先看下如何移动蛇头元素：</p>
<h5 id="蛇头移动"><a href="#蛇头移动" class="headerlink" title="蛇头移动"></a><a href="about:blank#%E8%9B%87%E5%A4%B4%E7%A7%BB%E5%8A%A8" title="蛇头移动"></a>蛇头移动</h5><p>需要根据与目标元素（也就是<code>next_cell</code>）的的位置和蛇头当前的位置（<code>this.cells[0]</code>）来决定<code>this.cells[0]</code>的<code>x</code>和<code>y</code>坐标接下来的变化。</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda1748da.png" alt="springboot2-36.png"></p>
<p>此时已经可以达到移动效果：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda1b0788.png" alt="springboot2-37.png"></p>
<p>此时实现了蛇头的移动，但是还没有实现蛇尾移动。</p>
<h5 id="蛇尾移动"><a href="#蛇尾移动" class="headerlink" title="蛇尾移动"></a><a href="about:blank#%E8%9B%87%E5%B0%BE%E7%A7%BB%E5%8A%A8" title="蛇尾移动"></a>蛇尾移动</h5><p>首先在<code>src\assets\scripts\Snack.js</code>增加判断蛇的长度是否增加的函数</p>
<p>我们规定，前 10 回合，蛇的长度每回合+1，后面的回合，每 3 回合+1，也就是第 13,16,19…</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda241173.png" alt="springboot2-38.png"></p>
<p>如果需要变长，那么蛇尾不动即可；如果不变长，那么蛇尾就要跟着蛇头移动（并且移动完，要将蛇尾砍掉，从对象数组中移走）于是在<code>update_move()</code>中更新如下</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda34c941.png" alt="springboot2-39.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda3dd453.png" alt="springboot2-40.png"></p>
<h5 id="美化"><a href="#美化" class="headerlink" title="美化"></a><a href="about:blank#%E7%BE%8E%E5%8C%96" title="美化"></a>美化</h5><p>1）让蛇形体更连贯</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda499580.png" alt="springboot2-41.png"></p>
<p>2）让蛇更瘦</p>
<p>更新<code>render()</code></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda453572.png" alt="springboot2-42.png"></p>
<h4 id="合法性判断"><a href="#合法性判断" class="headerlink" title="合法性判断"></a><a href="about:blank#%E5%90%88%E6%B3%95%E6%80%A7%E5%88%A4%E6%96%AD" title="合法性判断"></a>合法性判断</h4><p>我们还要在<code>src\assets\scripts\GameMap.js</code>中加入合法性判断，用于检测目标位置是否合法</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda505a6d.png" alt="springboot2-43.png"></p>
<p>在<code>src\assets\scripts\Snack.js</code>中的<code>next_step()</code>，要针对这种判断做出反应</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda5ee93f.png" alt="springboot2-44.png"></p>
<p>并在<code>render()</code>中加入绘图逻辑，当蛇 over 的时候，颜色变白</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda5e58c2.png" alt="springboot2-45.png"></p>
<p>结果展示：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda644673.png" alt="springboot2-46.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda77414f.png" alt="springboot2-47.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda7d33cd.png" alt="springboot2-48.png"></p>
<p>往回走也是不行，因为相当于自己和之前的 cell 装机</p>
<p>注意，两条蛇的合法性判断是独立的。当两条蛇的蛇头位置都不合法时，平局</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda801e0e.png" alt="springboot2-49.png"></p>
<h3 id="蛇的美化"><a href="#蛇的美化" class="headerlink" title="蛇的美化"></a><a href="about:blank#%E8%9B%87%E7%9A%84%E7%BE%8E%E5%8C%96" title="蛇的美化"></a>蛇的美化</h3><p>为蛇头添加眼睛</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda86559c.png" alt="springboot2-50.png"></p>
<p>初始化<code>Snack</code>类时候，初始化一个<code>eye_direction</code>变量表示蛇的眼睛方向</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791edaa1abb3.png" alt="springboot2-51.png"></p>
<p>然后在每次执行<code>next_step()</code>函数时，更新<code>eye_direction</code>变量</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791eda8d35a5.png" alt="springboot2-52.png"></p>
<p>计算蛇眼睛在不同方向上的偏移量</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ee040222f.png" alt="springboot2-53.png"></p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ee0399bb2.png" alt="springboot2-54.png"></p>
<p>最后在<code>render()</code>函数中画蛇眼睛</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ee048c79d.png" alt="springboot2-55.png"></p>
<p>然后保存代码：</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ee053684c.png" alt="springboot2-56.png"></p>
<p>查看历史记录</p>
<p><img src="https://www.helloimg.com/i/2025/01/23/6791ee044c3f5.png" alt="springboot2-57.png"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="https://www.helloimg.com/i/2025/01/06/677bd0ca46aa1.gif" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="https://www.helloimg.com/i/2025/01/06/677bd0ca46aa1.gif" title="头像" alt="头像"></a><div class="post-copyright__author_name">xujiaojiao</div><div class="post-copyright__author_desc">生活明朗，万物可爱</div></div><div class="post-copyright__post__info"><a class="post-copyright__reprint" title="该文章为转载文章，注意版权协议" target="_blank" rel="noopener" href="https://www.xujiaojiao.xyz">转载</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.xujiaojiao.xyz')">创建菜单和游戏界面</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://www.helloimg.com/i/2024/12/22/67680d24634a2.jpg" target="_blank"><img class="post-qr-code-img" src="https://www.helloimg.com/i/2024/12/22/67680d24634a2.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://www.helloimg.com/i/2024/12/22/67680d250f28e.jpg" target="_blank"><img class="post-qr-code-img" src="https://www.helloimg.com/i/2024/12/22/67680d250f28e.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.xujiaojiao.xyz"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=创建菜单和游戏界面&amp;url=https://www.xujiaojiao.xyz&amp;pic=https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">此文章版权归xujiaojiao所有，如有转载，请注明来自原作者</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/springboot/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>springboot<span class="tagsPageCount">4</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/02/05/%E5%88%9B%E5%BB%BAgit%E7%8E%AF%E5%A2%83%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA/"><img class="prev-cover" src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">创建git环境及项目创建</div></div></a></div><div class="next-post pull-right"><a href="/2025/02/08/%E9%85%8D%E7%BD%AEMySQL%E5%92%8C%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97/"><img class="next-cover" src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">配置MySQL和注册登录模块</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/02/05/%E5%88%9B%E5%BB%BAgit%E7%8E%AF%E5%A2%83%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA/" title="创建git环境及项目创建"><img class="cover" src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-05</div><div class="title">创建git环境及项目创建</div></div></a></div><div><a href="/2025/02/24/%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E7%95%8C%E9%9D%A2/" title="创建个人中心界面"><img class="cover" src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-24</div><div class="title">创建个人中心界面</div></div></a></div><div><a href="/2025/02/08/%E9%85%8D%E7%BD%AEMySQL%E5%92%8C%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97/" title="配置MySQL和注册登录模块"><img class="cover" src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-08</div><div class="title">配置MySQL和注册登录模块</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="https://www.helloimg.com/i/2025/01/06/677bd0ca46aa1.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="toc-number">1.</span> <span class="toc-text">导航栏</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Bootstrap-%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">Bootstrap 使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-NavBar"><span class="toc-number">1.2.</span> <span class="toc-text">创建 NavBar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-NavBar"><span class="toc-number">1.3.</span> <span class="toc-text">导入 NavBar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.</span> <span class="toc-text">路由配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B8%E6%88%8F%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.</span> <span class="toc-text">游戏页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE%E4%B8%8E%E9%9A%9C%E7%A2%8D%E7%89%A9"><span class="toc-number">2.1.</span> <span class="toc-text">地图与障碍物</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%B1%BB-GameObject"><span class="toc-number">2.2.</span> <span class="toc-text">基类 GameObject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE%E7%B1%BB-GameMap"><span class="toc-number">2.3.</span> <span class="toc-text">地图类 GameMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%9C%E7%A2%8D%E7%89%A9%E7%B1%BB-Wall"><span class="toc-number">2.4.</span> <span class="toc-text">障碍物类 Wall</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%9B%87%E7%9A%84%E8%BF%90%E5%8A%A8"><span class="toc-number">3.</span> <span class="toc-text">蛇的运动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%95%E5%85%83%E7%B1%BB-Cell"><span class="toc-number">3.1.</span> <span class="toc-text">创建单元类 Cell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%9B%87%E7%B1%BB-Snack"><span class="toc-number">3.2.</span> <span class="toc-text">创建蛇类 Snack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%9B%87%E7%B1%BB"><span class="toc-number">3.3.</span> <span class="toc-text">实例化蛇类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E8%9B%87%E7%94%BB%E5%87%BA%E6%9D%A5"><span class="toc-number">3.4.</span> <span class="toc-text">将蛇画出来</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%9B%87%E7%9A%84%E8%BF%90%E5%8A%A8-1"><span class="toc-number">3.5.</span> <span class="toc-text">蛇的运动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E5%8A%A8"><span class="toc-number">3.5.1.</span> <span class="toc-text">怎么动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%8A%A8"><span class="toc-number">3.5.2.</span> <span class="toc-text">什么时候动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.3.</span> <span class="toc-text">获取用户操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%9B%87%E7%9A%84%E7%A7%BB%E5%8A%A8"><span class="toc-number">3.5.4.</span> <span class="toc-text">控制蛇的移动</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%9B%87%E5%A4%B4%E7%A7%BB%E5%8A%A8"><span class="toc-number">3.5.4.1.</span> <span class="toc-text">蛇头移动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%9B%87%E5%B0%BE%E7%A7%BB%E5%8A%A8"><span class="toc-number">3.5.4.2.</span> <span class="toc-text">蛇尾移动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BE%8E%E5%8C%96"><span class="toc-number">3.5.4.3.</span> <span class="toc-text">美化</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E6%B3%95%E6%80%A7%E5%88%A4%E6%96%AD"><span class="toc-number">3.5.5.</span> <span class="toc-text">合法性判断</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%9B%87%E7%9A%84%E7%BE%8E%E5%8C%96"><span class="toc-number">3.6.</span> <span class="toc-text">蛇的美化</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/02/24/%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E7%95%8C%E9%9D%A2/" title="创建个人中心界面"><img src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="创建个人中心界面"/></a><div class="content"><a class="title" href="/2025/02/24/%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E7%95%8C%E9%9D%A2/" title="创建个人中心界面">创建个人中心界面</a><time datetime="2025-02-24T05:47:16.000Z" title="发表于 2025-02-24 13:47:16">2025-02-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/08/%E9%85%8D%E7%BD%AEMySQL%E5%92%8C%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97/" title="配置MySQL和注册登录模块"><img src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="配置MySQL和注册登录模块"/></a><div class="content"><a class="title" href="/2025/02/08/%E9%85%8D%E7%BD%AEMySQL%E5%92%8C%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97/" title="配置MySQL和注册登录模块">配置MySQL和注册登录模块</a><time datetime="2025-02-08T12:57:17.000Z" title="发表于 2025-02-08 20:57:17">2025-02-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/05/%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%92%8C%E6%B8%B8%E6%88%8F%E7%95%8C%E9%9D%A2/" title="创建菜单和游戏界面"><img src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="创建菜单和游戏界面"/></a><div class="content"><a class="title" href="/2025/02/05/%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%92%8C%E6%B8%B8%E6%88%8F%E7%95%8C%E9%9D%A2/" title="创建菜单和游戏界面">创建菜单和游戏界面</a><time datetime="2025-02-05T05:27:26.000Z" title="发表于 2025-02-05 13:27:26">2025-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/05/%E5%88%9B%E5%BB%BAgit%E7%8E%AF%E5%A2%83%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA/" title="创建git环境及项目创建"><img src="https://www.helloimg.com/i/2025/02/05/67a2f642585a2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="创建git环境及项目创建"/></a><div class="content"><a class="title" href="/2025/02/05/%E5%88%9B%E5%BB%BAgit%E7%8E%AF%E5%A2%83%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA/" title="创建git环境及项目创建">创建git环境及项目创建</a><time datetime="2025-02-05T05:21:19.000Z" title="发表于 2025-02-05 13:21:19">2025-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/22/vue-API/" title="vue_API"><img src="https://www.helloimg.com/i/2025/01/22/6790e0f135b1a.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue_API"/></a><div class="content"><a class="title" href="/2025/01/22/vue-API/" title="vue_API">vue_API</a><time datetime="2025-01-22T12:36:47.000Z" title="发表于 2025-01-22 20:36:47">2025-01-22</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><div id="runtimeTextTip"></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="徐娇娇" target="_blank">徐娇娇</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://userxjj.github.io/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.xujiaojiaojiao.cn/" title="xjjapp"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="xjjapp"/><span class="back-menu-item-text">xjjapp</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 互动</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/SSH%E3%80%81SCP/" style="font-size: 0.88rem;">SSH、SCP<sup>1</sup></a><a href="/tags/Web/" style="font-size: 0.88rem;">Web<sup>2</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>1</sup></a><a href="/tags/javaScript/" style="font-size: 0.88rem;">javaScript<sup>8</sup></a><a href="/tags/linux/" style="font-size: 0.88rem;">linux<sup>2</sup></a><a href="/tags/react/" style="font-size: 0.88rem;">react<sup>4</sup></a><a href="/tags/shell/" style="font-size: 0.88rem;">shell<sup>1</sup></a><a href="/tags/springboot/" style="font-size: 0.88rem;">springboot<sup>4</sup></a><a href="/tags/thrift/" style="font-size: 0.88rem;">thrift<sup>1</sup></a><a href="/tags/thrift-1/" style="font-size: 0.88rem;">thrift-1<sup>1</sup></a><a href="/tags/vim%E3%80%81tmux/" style="font-size: 0.88rem;">vim、tmux<sup>1</sup></a><a href="/tags/vue3/" style="font-size: 0.88rem;">vue3<sup>3</sup></a><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" style="font-size: 0.88rem;">嵌入式<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">操作系统<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>4</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">设计模式<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("12/17/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎来到我的博客!`,
    `生活明朗, 万物可爱`,
    "已上线",
    dnum,
    "天",
    "©2024 By xujiaojiao V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 小饺子 %c 你正在访问 徐娇娇 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("12/17/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "";
        img.title = "明天继续加油~~";
        img.alt = "明天继续加油~~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '7MMzG8yyatpji22LNGIM2pGm-gzGzoHsz',
      appKey: 'k1XOcKls9zTSRdizdkIxUeyb',
      avatar: 'monsterid',
      serverURLs: 'https://7mmzg8yy.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="分类"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=monsterid'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://7mmzg8yy.lc-cn-n1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": '7MMzG8yyatpji22LNGIM2pGm-gzGzoHsz',
        "X-LC-Key": 'k1XOcKls9zTSRdizdkIxUeyb',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>